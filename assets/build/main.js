(()=>{"use strict";function e(e){const t=e.target,n=t.dataset.action,a=t.dataset.confirmationmessage;confirm(a)&&(window.location=n)}function t(e,t){const n=e;n.forEach((function(e){e.style.display="block"})),t&&n.forEach((function(e){const n=-1!==e.textContent.toLowerCase().indexOf(t);e.style.display=n?"block":"none"}))}function n(e,t,n){const a=n.dataset.removeText||"Remove",i=document.createElement("li");return i.innerHTML=`<input type="hidden" name="${t}" value="0"> \n        <label>\n            <input type="checkbox" name="${t}" value="1">\n            ${e}\n        </label>\n        <button\n            type="button"\n            class="button button-small button-text-danger dashicons-before dashicons-trash"\n        >${a}</button>`,i.classList.add("capability-item"),i}function a(){return document.querySelectorAll('#capability-list .capability-item input[type="checkbox"]')}function i(e){var i;(function(e,t,a){const i=document.querySelector(e),c=document.querySelector(t),o=document.querySelector(a);c.addEventListener("click",(function(){if(i.reportValidity(),!i.validity.valid)return;const e=`role_caps[${i.value.trim()}]`;o.appendChild(n(i.value.trim(),e,o)),i.value=""}))})((e={quickFilter:{inputSelector:"#capability-filter",listItemsSelector:"#capability-list li, #add-capabilities-list li",wrapperSelector:"#nav-menus-frame"},capabilityListSelector:"#capability-list",capabilityListToggleSelector:"button",addNewCapability:{inputSelector:"#new-capability",addBtnSelector:"#add-capability"},addCapabilityFromList:{checkboxSelector:'#add-capabilities-list input[type="checkbox"]',submitButtonSelector:"#add-capabilities"},accordionToggleSelector:".arm-postbox-accordion-header",...e}).addNewCapability.inputSelector,e.addNewCapability.addBtnSelector,e.capabilityListSelector),function(e,t,a){const i=document.querySelectorAll(e),c=document.querySelector(t),o=document.querySelector(a);i&&c&&o?(c.disabled=!0,i.forEach((e=>{e.addEventListener("change",(()=>{c.disabled=!([...i].filter((e=>e.checked)).length>0)}))})),c.addEventListener("click",(e=>{[...i].filter((e=>e.checked)).forEach((e=>{const t=e.parentElement.textContent.trim();o.appendChild(n(t,e.name,o)),e.checked=!1,e.disabled=!0})),c.disabled=!0}))):console.warn("Aikon Role Manager: One or more elements not found in addCapabilityFromList()")}(e.addCapabilityFromList.checkboxSelector,e.addCapabilityFromList.submitButtonSelector,e.capabilityListSelector),function(e){const t=document.querySelector(e);t&&t.addEventListener("click",(function(e){const n=t.dataset.removeText||"Remove",a=t.dataset.restoreText||"Restore";if("BUTTON"!==e.target.tagName)return;const i="delete__",c=e.target.parentElement,o=c.querySelector('input[type="checkbox"]'),l=c.querySelector('input[type="hidden"]');let r=l.name;const d=r.includes(i);d?(r=r.replace(i,""),o.name=r,l.name=r,o.disabled=!1,e.target.innerHTML=n):(r=i+r,o.name=r,l.name=r,o.disabled=!0,e.target.innerHTML=a),console.dir({name:r,checkbox:o,hidden:l,isDelete:d})}))}(e.capabilityListSelector,e.capabilityListToggleSelector),function(e,n,a){const i=document.querySelector(e),c=document.querySelectorAll(n),o=document.querySelector(a);i&&c&&i.addEventListener("input",(e=>{const n=i.value.toLowerCase();if(n.length<2)return t(c,null),void o.setAttribute("aria-expand-all","false");t(c,n),o.setAttribute("aria-expand-all","true")}))}(e.quickFilter.inputSelector,e.quickFilter.listItemsSelector,e.quickFilter.wrapperSelector),i=e.accordionToggleSelector,document.querySelectorAll(i).forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement,n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",n?"false":"true")}))})),function(){const e=document.querySelector(".arm_roles-manager-form-toolbar #check-all"),t=document.querySelector(".arm_roles-manager-form-toolbar #check-none");e&&t&&(e.addEventListener("click",(()=>{a().forEach((e=>{e.checked=!0}))})),t.addEventListener("click",(()=>{a().forEach((e=>{e.checked=!1}))})))}()}window.addEventListener("load",(()=>{var t;t={deleteSelector:".delete_role_button",...t},document.querySelectorAll(t.deleteSelector).forEach((t=>{t.addEventListener("click",e)})),i()}))})();