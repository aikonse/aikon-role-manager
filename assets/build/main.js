(()=>{"use strict";function e(e){const t=e.target,n=t.dataset.action,i=t.dataset.confirmationmessage;confirm(i)&&(window.location=n)}function t(e,t){const n=e;n.forEach((function(e){e.style.display="block"})),t&&n.forEach((function(e){const n=-1!==e.textContent.toLowerCase().indexOf(t);e.style.display=n?"block":"none"}))}function n(e,t,n){const i=n.dataset.removeText||"Remove",a=document.createElement("li");return a.innerHTML=`<input type="hidden" name="${t}" value="0"> \n        <label>\n            <input type="checkbox" name="${t}" value="1">\n            ${e}\n        </label>\n        <button\n            type="button"\n            class="button button-small button-text-danger dashicons-before dashicons-trash"\n        >${i}</button>`,a}function i(e){var i;(function(e,t,i){const a=document.querySelector(e),o=document.querySelector(t),c=document.querySelector(i);o.addEventListener("click",(function(){if(a.reportValidity(),!a.validity.valid)return;const e=`role_caps[${a.value.trim()}]`;c.appendChild(n(a.value.trim(),e,c)),a.value=""}))})((e={quickFilter:{inputSelector:"#capability-filter",listItemsSelector:"#capability-list li, #add-capabilities-list li",wrapperSelector:"#nav-menus-frame"},capabilityListSelector:"#capability-list",capabilityListToggleSelector:"button",addNewCapability:{inputSelector:"#new-capability",addBtnSelector:"#add-capability"},addCapabilityFromList:{checkboxSelector:'#add-capabilities-list input[type="checkbox"]',submitButtonSelector:"#add-capabilities"},accordionToggleSelector:".arm-postbox-accordion-header",...e}).addNewCapability.inputSelector,e.addNewCapability.addBtnSelector,e.capabilityListSelector),function(e,t,i){const a=document.querySelectorAll(e),o=document.querySelector(t),c=document.querySelector(i);a&&o&&c?(o.disabled=!0,a.forEach((e=>{e.addEventListener("change",(()=>{o.disabled=!([...a].filter((e=>e.checked)).length>0)}))})),o.addEventListener("click",(e=>{[...a].filter((e=>e.checked)).forEach((e=>{const t=e.parentElement.textContent.trim();c.appendChild(n(t,e.name,c)),e.checked=!1,e.disabled=!0})),o.disabled=!0}))):console.warn("Aikon Role Manager: One or more elements not found in addCapabilityFromList()")}(e.addCapabilityFromList.checkboxSelector,e.addCapabilityFromList.submitButtonSelector,e.capabilityListSelector),function(e){const t=document.querySelector(e);t&&t.addEventListener("click",(function(e){const n=t.dataset.removeText||"Remove",i=t.dataset.restoreText||"Restore";if("BUTTON"!==e.target.tagName)return;const a="delete__",o=e.target.parentElement,c=o.querySelector('input[type="checkbox"]'),l=o.querySelector('input[type="hidden"]');let r=l.name;const d=r.includes(a);d?(r=r.replace(a,""),c.name=r,l.name=r,c.disabled=!1,e.target.innerHTML=n):(r=a+r,c.name=r,l.name=r,c.disabled=!0,e.target.innerHTML=i),console.dir({name:r,checkbox:c,hidden:l,isDelete:d})}))}(e.capabilityListSelector,e.capabilityListToggleSelector),function(e,n,i){const a=document.querySelector(e),o=document.querySelectorAll(n),c=document.querySelector(i);a&&o&&a.addEventListener("input",(e=>{const n=a.value.toLowerCase();if(n.length<2)return t(o,null),void c.setAttribute("aria-expand-all","false");t(o,n),c.setAttribute("aria-expand-all","true")}))}(e.quickFilter.inputSelector,e.quickFilter.listItemsSelector,e.quickFilter.wrapperSelector),i=e.accordionToggleSelector,document.querySelectorAll(i).forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement,n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",n?"false":"true")}))}))}window.addEventListener("load",(()=>{var t;t={deleteSelector:".delete_role_button",...t},document.querySelectorAll(t.deleteSelector).forEach((t=>{t.addEventListener("click",e)})),i()}))})();